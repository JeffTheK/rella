require 'rake/clean'

CXX = 'g++'

SRC_FILES = 'src/**.cpp'
TEST_FILES = 'test/**.cpp'

CLEAN.include 'bin/**'

task :test do
    TEST_FLAGS = '-Wall -Wextra -static-libstdc++ -O0 -g'
    OUT = '-o bin/test'
    system('rake clean')
    system("#{CXX} #{TEST_FLAGS} #{SRC_FILES} #{TEST_FILES} #{OUT}")
    system("./bin/test")
end